formatVersion: 1
inputs:
  vmCount:
    type: integer
    default: 1
    maximum: 5
resources:
  Cloud_Machine_1:
    type: Cloud.Machine
    metadata:
      layoutPosition:
        - 0
        - 0
    properties:
      image: ubuntu24
      count: ${input.vmCount}
      flavor: medium
      networks:
        - network: ${resource.Cloud_Network_1.id}
      storage:
        constraints:
          - tag: storageTier:iscsi
  Cloud_Network_1:
    type: Cloud.NSX.Network
    metadata:
      layoutPosition:
        - 1
        - 0
    properties:
      networkType: routed
